# Required variables:
# - SOURCE_FILES/HEADER_FILES/RESOURCE_FILES
# - EFFECT_FILES/POST_PROCESSORS/UI_FILES
# - EXTRA_INCLUDE_DIRS: dependencies required besides KlarGE_Core and boost
# - EXTRA_LINKED_LIBRARIES: dependencies required besides KlarGE_Core and boost
#
MACRO(SETUP_SAMPLE EXE_NAME)

    SOURCE_GROUP("Source Files" FILES ${SOURCE_FILES})
    SOURCE_GROUP("Header Files" FILES ${HEADER_FILES})
    SOURCE_GROUP("Resource Files" FILES ${RESOURCE_FILES})
    SOURCE_GROUP("Effect Files" FILES ${EFFECT_FILES})
    SOURCE_GROUP("Post Processors" FILES ${POST_PROCESSORS})
    SOURCE_GROUP("UI Files" FILES ${UI_FILES})
    
    ADD_DEFINITIONS(${Boost_LIB_DIAGNOSTIC_DEFINITIONS})
    
    INCLUDE_DIRECTORIES(${KLAYGE_PROJECT_DIR}/Core/Include ${Boost_INCLUDE_DIRS})
    INCLUDE_DIRECTORIES(${EXTRA_INCLUDE_DIRS})
    LINK_DIRECTORIES(${Boost_LIBRARY_DIRS}
                     ${CMAKE_BINARY_DIR}/Core)  # for autolinking under MSVC
    
    ADD_EXECUTABLE(${EXE_NAME} ${SOURCE_FILES} ${HEADER_FILES} ${RESOURCE_FILES} )
    ADD_DEPENDENCIES(${EXE_NAME} ${KLAYGE_CORELIB_NAME})
    
    SET_TARGET_PROPERTIES(${EXE_NAME} PROPERTIES PROJECT_LABEL "Example_${EXE_NAME}")
    SET_TARGET_PROPERTIES(${EXE_NAME} PROPERTIES DEBUG_POSTFIX "${CMAKE_DEBUG_POSTFIX}")
    SET_TARGET_PROPERTIES(${EXE_NAME} PROPERTIES OUTPUT_NAME "${EXE_NAME}")
    
    IF(WIN32)
        SET(EXTRA_LINKED_LIBRARIES ${EXTRA_LINKED_LIBRARIES})
    ELSE(WIN32)
        SET(EXTRA_LINKED_LIBRARIES boost_system ${EXTRA_LINKED_LIBRARIES})
    ENDIF(WIN32)
    
    TARGET_LINK_LIBRARIES(${EXE_NAME} ${EXTRA_LINKED_LIBRARIES} )
    
    INSTALL(TARGETS ${EXE_NAME}
        RUNTIME DESTINATION ${KLAYGE_INSTALL_BINDIR}
        LIBRARY DESTINATION ${KLAYGE_INSTALL_LIBDIR}
        ARCHIVE DESTINATION ${KLAYGE_INSTALL_ARCHIVEDIR}
    )

ENDMACRO(SETUP_SAMPLE)

ADD_SUBDIRECTORY(DeferredRendering)
ADD_SUBDIRECTORY(DepthPeeling)
ADD_SUBDIRECTORY(Fractal)
ADD_SUBDIRECTORY(GPUParticleSystem)
ADD_SUBDIRECTORY(JudaTexViewer)
ADD_SUBDIRECTORY(ModelViewer)
ADD_SUBDIRECTORY(MotionBlurDoF)
ADD_SUBDIRECTORY(Ocean)
ADD_SUBDIRECTORY(Parallax)
ADD_SUBDIRECTORY(ParticleEditor)
ADD_SUBDIRECTORY(PNTriangles)
ADD_SUBDIRECTORY(PostProcessing)
ADD_SUBDIRECTORY(ProceduralTex)
ADD_SUBDIRECTORY(Refract)
ADD_SUBDIRECTORY(ShadowCubemap)
ADD_SUBDIRECTORY(SubSurface)
ADD_SUBDIRECTORY(Text)
ADD_SUBDIRECTORY(VertexDisplacement)
ADD_SUBDIRECTORY(VideoTexture)
