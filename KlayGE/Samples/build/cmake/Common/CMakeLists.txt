SET(LIB_NAME SampleCommon)

SET(SAMPLE_COMMON_LIB_OUTPUT_DIR ${KLAYGE_PROJECT_DIR}/Samples/lib/${KLAYGE_PLATFORM_NAME})

IF(KLAYGE_PLATFORM_DARWIN OR KLAYGE_PLATFORM_IOS)
	SET(SOURCE_FILES
		${KLAYGE_PROJECT_DIR}/Samples/src/Common/SampleCommon.mm
	)
ELSE()
	SET(SOURCE_FILES
		${KLAYGE_PROJECT_DIR}/Samples/src/Common/SampleCommon.cpp
	)
ENDIF()

SET(HEADER_FILES
	${KLAYGE_PROJECT_DIR}/Samples/src/Common/SampleCommon.hpp
)

SOURCE_GROUP("Source Files" FILES ${SOURCE_FILES})
SOURCE_GROUP("Header Files" FILES ${HEADER_FILES})

ADD_DEFINITIONS(-DSAMPLE_COMMON_SOURCE)
IF(KLAYGE_PLATFORM_WINDOWS_RUNTIME)
	ADD_DEFINITIONS(-ZW)
ENDIF()

INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${KLAYGE_PROJECT_DIR}/../KFL/include)
INCLUDE_DIRECTORIES(${KLAYGE_PROJECT_DIR}/Core/Include)
INCLUDE_DIRECTORIES(${EXTRA_INCLUDE_DIRS})
IF(KLAYGE_PLATFORM_ANDROID)
	INCLUDE_DIRECTORIES(${KLAYGE_PROJECT_DIR}/../External/android_native_app_glue)
ENDIF()
LINK_DIRECTORIES(${Boost_LIBRARY_DIR})
LINK_DIRECTORIES(${KLAYGE_PROJECT_DIR}/../KFL/lib/${KLAYGE_PLATFORM_NAME})
LINK_DIRECTORIES(${KLAYGE_PROJECT_DIR}/lib/${KLAYGE_PLATFORM_NAME})
LINK_DIRECTORIES(${EXTRA_LINKED_DIRS})

ADD_LIBRARY(${LIB_NAME} STATIC
	${SOURCE_FILES} ${HEADER_FILES})

SET(LIB_OUTPUT_NAME ${LIB_NAME}${KLAYGE_OUTPUT_SUFFIX})

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	ARCHIVE_OUTPUT_DIRECTORY ${SAMPLE_COMMON_LIB_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${SAMPLE_COMMON_LIB_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${SAMPLE_COMMON_LIB_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO ${SAMPLE_COMMON_LIB_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL ${SAMPLE_COMMON_LIB_OUTPUT_DIR}
	PROJECT_LABEL ${LIB_NAME}
	DEBUG_POSTFIX ${CMAKE_DEBUG_POSTFIX}
	OUTPUT_NAME ${LIB_OUTPUT_NAME}
)
IF(KLAYGE_PLATFORM_WINDOWS_RUNTIME)
	SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES VS_WINRT_EXTENSIONS TRUE)
ENDIF()

TARGET_LINK_LIBRARIES(${LIB_NAME})
