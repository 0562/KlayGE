<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>KlayGE Readme</title>
</head>
<body>
<h1>粘土游戏引擎(KlayGE) 3.6.0 Readme</h1>
<p>龚敏敏<br />
	Homepage: <a href="http://klayge.sourceforge.net" target="_blank">http://klayge.sourceforge.net</a><br />
	E-Mail:	  <a href="mailto:enginedev@163.com">enginedev@163.com</a><br />
	QQ:       33611210</p>
<p>欢迎使用粘土游戏引擎 3.6.0<br />
	压缩包中包含的组件：KlayGE头文件，KlayGE源代码，KlayGE的构建工程文件</p>
<p>KlayGE是一个开放源代码的，跨平台的，基于插件结构的游戏引擎。</p>
<p>本引擎的设计目的是用最先进的技术武装引擎，它所提供框架使游戏的开发、测试、移植得到简化。</p>
<p>KlayGE的目标平台是引擎发布当年的出现的最高硬件到上一年出现的最低硬件。</p>
<h2><a id="menu">目录</a></h2>
<ul>
	<li><a href="#license">协议</a></li>
	<li><a href="#installation">安装</a></li>
	<li><a href="#third_part">第三方库</a></li>
	<li><a href="#history">发展历程</a></li>
	<li><a href="#structure">目录结构</a></li>
	<li><a href="#compiler">编译器支持</a></li>
</ul>
<hr />
<h2><a id="license">协议</a></h2>
<p>KlayGE按照GPL 2.0协议发布。这意味着所有人都可以用它，而且可以访问到它全部的源代码，但必须保证用到KlayGE的项目也必须按照GPL 2.0协议进行发布。</p>
<p>开放源代码是一种很强大的开发方式，它鼓励散布、合作开发和用户的自由。开放源代码软件的源代码是100%可见的，不会暗藏流氓软件，间谍软件和病毒。</p>
<p><a href="#menu">^返回目录</a></p>
<hr />
<h2><a id="installation">安装</a></h2>
<ol>
	<li>把KlayGE.7z解压缩到一个目录，比如说 F:\KlayGE</li>
	<li>设置路径。这里拿VS 2005举例，其他环境请参考它们的帮助文件。
		<ol>
			<li>打开“Tools”-&gt;“Options”-&gt;“Projects and Solutions”-&gt;&quot;VC++ Directories&quot;，在“Show directories for:”下拉框中选择“Include files”，在下面添加F:\KlayGE\Core\Include、F:\KlayGE\AppLayer\Include和F:\KlayGE\Plugins\Include</li>
			<li>在“Show directories for:”下拉框中选择&quot;Library files&quot;，在下面添加F:\KlayGE\Lib\Win32 (如果要用x64的版本，就把Win32换成x64)</li>
			<li>点“确定”按钮，建议关闭VS 2005 IDE以保存设置</li>
		</ol>
	</li>
</ol>
<p><a href="#menu">^返回目录</a></p>
<hr />
<h2><a id="third_part">第三方库</a></h2>
<p>在编译KlayGE的之前，需要先安装下列第三方库。</p>
<h4>Core需要：</h4>
<ul>
	<li>Python 2.5.1，<a href="http://www.python.org" target="_blank">http://www.python.org</a></li>
	<li>Boost 1.34.1，<a href="http://www.boost.org" target="_blank">http://www.boost.org</a>。1.34.1的typeof不兼容于vc8，解决方案是从CVS HEAD中获得boost\typeof\msvc\typeof_impl.hpp和boost\typeof\typeof.hpp，并覆盖掉原有的对应文件。</li>
	<li>FreeType 2.3.5，<a href="http://freetype.sourceforge.net" target="_blank">http://freetype.sourceforge.net</a>。编译它的Debug和Release两个solution configuration。</li>
</ul>
<h4>D3D9 Rendering System和DSound Audio System需要：</h4>
<ul>
	<li>DirectX SDK June 2007，从<a href="http://msdn.microsoft.com/directx" target="_blank">http://msdn.microsoft.com/directx</a>下载</li>
</ul>
<h4>DShow Show System需要：</h4>
<ul>
	<li>Windows(R) Server 2003 R2 Platform SDK，从<a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=484269e2-3b89-47e3-8eb7-1f2be6d7123a&amp;displaylang=en" target="_blank">http://www.microsoft.com/downloads/details.aspx?FamilyID=484269e2-3b89-47e3-8eb7-1f2be6d7123a&amp;displaylang=en</a>下载</li>
</ul>
<h4>OggVorbis Audio Datasource需要：</h4>
<ul>
	<li>libogg和libvorbis，从<a href="http://xiph.org/downloads/" target="_blank">http://xiph.org/downloads/</a>下载，需要把它编译成static库。</li>
</ul>
<h4>OpenAL Audio System需要：</h4>
<ul>
	<li>OpenAL SDK，从<a href="http://www.openal.org/downloads.html" target="_blank">http://www.openal.org/downloads.html</a>下载</li>
</ul>
<h4>OpenGL Rendering System需要：</h4>
<ul>
	<li>NVIDIA Cg，从<a href="http://developer.nvidia.com/object/cg_toolkit.html" target="_blank">http://developer.nvidia.com/object/cg_toolkit.html</a>下载</li>
</ul>
<p>由于KlayGE在VC下使用的运行库是多线程的DLL，所以需要把<strong>所有</strong>连接到exe的lib的运行库改为多线程DLL（Project-  &gt;Properties-&gt;Configuration Properties-&gt;C/C++-&gt;Code Generation-&gt;RuntimeLibrary，选择Multi-threaded Debug DLL/Multi-threaded DLL）。</p>
<p>另外，用VC编译Release版的Boost和FreeType需要定义_SECURE_SCL=0宏（在Project-&gt;Properties-&gt;Configuration Properties-&gt;C/C++-&gt;Preprocessor-&gt;Preprocessor Definitions中添加）。</p>
<hr />
<h2><a id="history">发展历程</a></h2>
<p><strong>3.6.0</strong><br />
	兼容Vista 32/64<br />
	使用pbo加速纹理填充<br />
	改用7z作为打包格式<br />
	加强了3DS Max插件<br />
	RenderEffect增加了Clone方法<br />
	去掉了RenderTarget和RenderWindow<br />
	去掉了Triangle fan的拓扑方式<br />
	增加了UI系统<br />
	增加了Depth of field例子<br />
	去掉了对Wav的支持<br />
	启用了新的thread和thread_pool</p>
<p><strong>3.5.0 (2007.3.9)</strong><br />
	支持Alpha to coverage<br />
	改用基于xml的特效格式<br />
	全新的特效系统，支持所有的状态缓存<br />
	增加了RenderStateObject和ShaderObject<br />
	支持x64系统<br />
	OpenGL插件可以检测Shader Model 4<br />
	增加了基于GPU的粒子系统<br />
	增加了aligned_allocator<br />
	修正了thread_pool死锁的bug（感谢Roy报告此bug）<br />
	支持NVPerfHUD<br />
	增加了有符号元素格式<br />
	不再提供VS2003的工程文件</p>
<p><strong>3.4.0 (2006.9.22)</strong><br />
	导出插件支持骨骼的导出<br />
	支持normal map的压缩<br />
	支持HDR纹理的压缩<br />
	加入了粒子系统<br />
	重写的播放引擎，现在通过图形引擎播放视频<br />
	重写了height map地形生成器<br />
	增加了HDRPostProcess</p>
<p><strong>3.3.0 (2006.6.30)</strong><br />
	Font支持渲染到3D位置<br />
	统一了渲染引擎的状态设置<br />
	OpenGL插件要求硬件支持OpenGL 2.0和FBO<br />
	增加了FrameBuffer和RenderView的结构<br />
	使用以Technique为单位的渲染<br />
	支持渲染到3D Texture的一个片<br />
	增加了多种纹理格式<br />
	统一了元素格式的使用<br />
	DistanceMap生成器支持直接对Volume的计算<br />
	增加了PostProcess</p>
<p><strong>3.2.0 (2006.5.15)</strong><br />
	增加了高精度计时器<br />
	完整地支持骨骼动画<br />
	渲染部分的结构有了较大的调整<br />
	把IndexStream和VertexStream合并成GraphicsBuffer<br />
	增加了RenderLayout<br />
	支持sRGB纹理<br />
	支持ATI的instancing方法<br />
	增加了与平台无关的线程池</p>
<p><strong>3.1.0 (2005.11.27)</strong><br />
	增加了SceneObject<br />
	简化了Instancing的使用<br />
	支持Visual Studio 2005<br />
	分离了实例和几何顶点流</p>
<p><strong>3.0.0 (2005.10.26)</strong><br />
	去掉了固定流水线<br />
	增加了Occlusion Query<br />
	增加了Point sprite<br />
	支持Instancing<br />
	支持Vertex Texture<br />
	增强了KMesh和3dsmax导出插件<br />
	优化了RenderEffect<br />
	InputEngine改为使用Event形式处理消息<br />
	支持全场景的多遍渲染<br />
	支持顶点流的合并和拼接<br />
	增加了RenderablePlane</p>
<p><strong>2.8.0 (2005.8.14)</strong><br />
	增加了RenderDeviceCaps<br />
	增加了OpenGL兼容性检测工具<br />
	增加了Sampler<br />
	重写了RenderEffect<br />
	只支持OpenGL 1.5及以上<br />
	简化了RenderEngine<br />
	DInputDevice改为多继承结构<br />
	增加了RenderToVertexStream</p>
<p><strong>2.7.1 (2005.7.15)</strong><br />
	美化了字体显示效果<br />
	LoadKMesh可以使用自定义类<br />
	增加了RenderableHelper基类<br />
	RenderEngine::ViewMatrix和ProjectionMatrix改为const</p>
<p><strong>2.7.0 (2005.7.2)</strong><br />
	改成GPL协议<br />
	增加了KMesh<br />
	去掉了RenderEngine::TextureCoordSet<br />
	AddressingMode, Filtering和Anisotropy从RenderEngine移到Texture中<br />
	Texture增加了MaxMipLevel和MipMapLodBias<br />
	App3D增加了Quit<br />
	支持OpenGL 1.5</p>
<p><strong>2.6.0 (2005.6.2)</strong><br />
	修正了SceneManager类CanBeCulled的bug<br />
	增加了half类型<br />
	D3D9Texture增加了对surface的检查<br />
	增加了RenderableSkyBox<br />
	支持HDR</p>
<p><strong>2.5.0 (2005.5.2)</strong><br />
	增加了3DSMax导出插件<br />
	可以同时使用多个输入动作表<br />
	MathLib改为使用返回值返回结果<br />
	改进了CameraController<br />
	增加了RenderableHelper<br />
	视锥裁减改为使用LUT实现</p>
<p><strong>2.4.0 (2005.3.28)</strong><br />
	支持纹理压缩<br />
	增加了D3D9Resource<br />
	支持DDS格式的载入和保存<br />
	八叉树改为线性实现<br />
	支持深度纹理</p>
<p><strong>2.3.0 (2005.3.2)</strong><br />
	使用FreeType实现Font<br />
	修正了几个内存泄漏<br />
	增加了对浮点纹理的支持<br />
	增加了CopyToMemory<br />
	增加了视锥裁减插件<br />
	D3D9插件增加了OnLostDevice和OnResetDevice</p>
<p><strong>2.2.0 (2004.11.20)</strong><br />
	修正了DSound插件的音量问题<br />
	去掉了ManagerBase、FileSystem、Crc32、alloc、Timer、Random<br />
	使用boost 1.32.0<br />
	增加了Trace</p>
<p><strong>2.1.3 (2004.10.19)</strong><br />
	增加了以boost::tuple为参数的ScriptEngine::Call<br />
	修正了一些关于STL的问题<br />
	修正了Pkt的CRC错误<br />
	去掉了MemoryLib</p>
<p><strong>2.1.2 (2004.9.5)</strong><br />
	增加了BoneMesh<br />
	增加了RenderEffectParameter<br />
	支持DX 9.0c SDK<br />
	修正了DiskFile::Seek的Bug<br />
	把const T&amp;改为更规则的T const &amp;<br />
	InputEngine改用Bridge实现</p>
<p><strong>2.1.1 (2004.5.25)</strong><br />
	大量使用boost<br />
	数学库都采用泛型实现<br />
	增加了Parallax的Demo<br />
	增加了ResLocator</p>
<p><strong>2.1.0 (2004.4.20)</strong><br />
	增强了OpenGL<br />
	去掉了汇编代码<br />
	直接支持单独的Shader<br />
	简化了打包文件目录表的表示法</p>
<p><strong>2.0.5 (2004.4.13)</strong><br />
	增强了OpenGL<br />
	修正了WindowMovedOrResized的bug<br />
	MemFile改用stringstream实现<br />
	提高了代码安全性</p>
<p><strong>2.0.4 (2004.4.7)</strong><br />
	修正了OALMusicBuffer无法loop的bug<br />
	DSMusicBuffer改用timeSetEvent实现<br />
	改进了VertexBuffer<br />
	Audio部分增加了NullObject<br />
	增加了Demo</p>
<p><strong>2.0.3 (2004.3.12)</strong><br />
	简化了VertexBuffer<br />
	去掉了软件顶点混合</p>
<p><strong>2.0.2 (2003.12.28)</strong><br />
	改进了渲染队列<br />
	使用Python做脚本语言<br />
	DiskFile改为用标准C++流实现</p>
<p><strong>2.0.1 (2003.10.17)</strong><br />
	去掉了DX8的支持 <br />
	增加了一些工具</p>
<p><strong>2.0.0 (2003.10.1)</strong><br />
	正式版发布</p>
<p><strong>2.0.0 Beta (2003.9.5)</strong><br />
	初次发布<br />
</p>
<p><a href="#menu">^返回目录</a></p>
<hr />
<h2><a id="structure">目录结构</a></h2>
<p>下面是关于完整的KlayGE目录的主要描述。</p>
<pre>
\AppLayer
	应用程序层

	\Include
		应用程序层的头文件

	\Src
		应用程序层的源文件

\Build
	工程文件

\Core
	内核文件

	\Include
		内核头文件

	\Src
		内核源文件

		\Audio
			音频引擎内核的源文件
		\Input
			输入引擎内核的源文件
		\Kernel
			核心源文件
		\Net
			网络引擎的源文件
		\Pack
			文件打包系统的源文件
		\Render
			渲染系统内核的源文件
		\Scene
			场景管理器内核的源文件
		\Script
			脚本引擎的源文件
		\Show
			播放引擎内核的源文件

\Doc
	文档

\Exporters
	\3DSMax
		\MeshML
			3ds max的导出插件

\Plugins
	插件文件

	\Include
		插件头文件

	\Src
		插件源代码

		\Audio
			音频引擎插件的源文件
		\AudioDataSource
			音频数据源插件的源文件
		\Input
			输入引擎插件的源文件
		\Render
			渲染系统插件的源文件
		\Scene
			场景管理器插件的源文件
		\Show
			播放引擎插件的源文件
		\Terrain
			地形插件的源文件

\RenderFX
	渲染特效脚本

\Samples
	例子

\Tools
	工具文件

	\Bin
		编译生成的工具文件
	\DistanceMapCreator
		从height map建立distance map的工具
	\GLCompatibility
		OpenGL兼容性测试工具
	\HDRCompressor
		HDR纹理压缩器
	\MeshML2KMesh
		从.MeshML编译为.KModel的工具
	\NormalizerCubeMap
		生成归一化Cube map的工具
	\NormalMapCompressor
		Normal map压缩器
	\NormalMapGen
		从height map建立normal map的工具

\Lib
	存放编译后的静态连接库

</pre>
<p><a href="#menu">^返回目录</a></p>
<hr />
<h2><a id="compiler">编译器支持</a></h2>
<ul>
	<li>推荐使用Visual Studio.NET 2005编译</li>
	<li>KlayGE是用Visual Studio.NET 2005开发和编译的，还提供了Visual Studio.NET 2005的sln文件。</li>
	<li>KlayGE不保证能在Visual Studio.NET以前的版本中编译通过。</li>
</ul>
<p><a href="#menu">^返回目录</a></p>
<hr />
<p>最后更新：2007-7-19</p>
</body>
</html>
