SET(SOURCE_FILES
	${KLAYGE_PROJECT_DIR}/Tools/src/KFontGen/KFontGen.cpp
)

SET(EXTRA_INCLUDE_DIRS
	${KLAYGE_PROJECT_DIR}/../External/freetype/include
	${KLAYGE_PROJECT_DIR}/../kfont/include
)

IF(WIN32)
	IF(MSVC)
		IF(MSVC_VERSION GREATER 1600)
			SET(FREETYPE_IDE_NAME "vc2012")
		ELSEIF(MSVC_VERSION GREATER 1500)
			SET(FREETYPE_IDE_NAME "vc2010")
		ELSEIF(MSVC_VERSION GREATER 1400)
			SET(FREETYPE_IDE_NAME "vc2008")
		ENDIF()
	ENDIF()
	IF(MINGW)
		SET(FREETYPE_IDE_NAME "mgw")
	ENDIF()
ELSE()
	SET(FREETYPE_IDE_NAME "gcc")
ENDIF()
IF(WIN32)
	IF(CMAKE_GENERATOR MATCHES "Win64")
		SET(FREETYPE_PLATFORM_NAME "x64")
	ELSE()
		SET(FREETYPE_PLATFORM_NAME "win32")
	ENDIF()
ENDIF()
IF(UNIX)
	IF(CMAKE_SYSTEM_PROCESSOR MATCHES "x86_64")
		SET(FREETYPE_PLATFORM_NAME "linux64")
	ELSE()
		SET(FREETYPE_PLATFORM_NAME "linux32")
	ENDIF()
ENDIF()

IF(MSVC)
	SET(EXTRA_LINKED_DIRS
		${KLAYGE_PROJECT_DIR}/../External/freetype/objs/${FREETYPE_PLATFORM_NAME}/${FREETYPE_IDE_NAME}
		${KLAYGE_PROJECT_DIR}/../kfont/lib/${KLAYGE_PLATFORM_NAME}
	)

	SET(EXTRA_LINKED_LIBRARIES
		debug freetype2411_D optimized freetype2411
		debug kfont_${KLAYGE_COMPILER_NAME}_${KLAYGE_ARCH_NAME}${CMAKE_DEBUG_POSTFIX} optimized kfont_${KLAYGE_COMPILER_NAME}_${KLAYGE_ARCH_NAME}
	)
ELSEIF(MINGW)
	SET(EXTRA_LINKED_DIRS
		${KLAYGE_PROJECT_DIR}/../External/freetype/objs
		${KLAYGE_PROJECT_DIR}/../kfont/lib/${KLAYGE_PLATFORM_NAME}
	)

	SET(EXTRA_LINKED_LIBRARIES ${EXTRA_LINKED_LIBRARIES}
		freetype
		debug kfont_${KLAYGE_COMPILER_NAME}_${KLAYGE_ARCH_NAME}${CMAKE_DEBUG_POSTFIX} optimized kfont_${KLAYGE_COMPILER_NAME}_${KLAYGE_ARCH_NAME}
		debug boost_program_options-mgw47-mt-d-1_53 optimized boost_program_options-mgw47-mt-1_53)
ELSE()
	SET(EXTRA_LINKED_LIBRARIES ${EXTRA_LINKED_LIBRARIES}
		freetype
		debug kfont_${KLAYGE_COMPILER_NAME}_${KLAYGE_ARCH_NAME}${CMAKE_DEBUG_POSTFIX} optimized kfont_${KLAYGE_COMPILER_NAME}_${KLAYGE_ARCH_NAME}
		boost_program_options)
ENDIF()

SETUP_TOOL(KFontGen)
