SET(LIB_NAME date_time)

SET(SOURCE_FILES
	${BOOST_PROJECT_DIR}/libs/date_time/src/gregorian/greg_month.cpp
	${BOOST_PROJECT_DIR}/libs/date_time/src/gregorian/greg_weekday.cpp
	${BOOST_PROJECT_DIR}/libs/date_time/src/gregorian/date_generators.cpp
)

SOURCE_GROUP("Source Files" FILES ${SOURCE_FILES})

ADD_DEFINITIONS(-DDATE_TIME_INLINE)
IF(KLAYGE_PREFERRED_LIB_TYPE STREQUAL "SHARED")
	ADD_DEFINITIONS(-DBOOST_DATE_TIME_DYN_LINK=1)
	ADD_DEFINITIONS(-DBOOST_ALL_DYN_LINK=1)
ELSE()
	ADD_DEFINITIONS(-DBOOST_DATE_TIME_STATIC_LINK=1)
ENDIF()
IF(KLAYGE_BUILD_PLATFORM_WINDOWS_RUNTIME)
	ADD_DEFINITIONS(-ZW)
ENDIF()

INCLUDE_DIRECTORIES(${BOOST_PROJECT_DIR}/)

ADD_LIBRARY(${LIB_NAME} ${KLAYGE_PREFERRED_LIB_TYPE}
	${SOURCE_FILES}
)

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	RUNTIME_OUTPUT_DIRECTORY ${BOOST_OUTPUT_DIR}
	RUNTIME_OUTPUT_DIRECTORY_DEBUG ${BOOST_OUTPUT_DIR}
	RUNTIME_OUTPUT_DIRECTORY_RELEASE ${BOOST_OUTPUT_DIR}
	RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO ${BOOST_OUTPUT_DIR}
	RUNTIME_OUTPUT_DIRECTORY_MINSIZEREL ${BOOST_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY ${BOOST_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${BOOST_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${BOOST_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO ${BOOST_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL ${BOOST_OUTPUT_DIR}
	PROJECT_LABEL ${LIB_NAME}
	DEBUG_POSTFIX ""
	DEBUG_OUTPUT_NAME boost_${LIB_NAME}-${KLAYGE_COMPILER_NAME}${KLAYGE_COMPILER_VERSION}-mt-gd-${BOOST_VER}
	RELEASE_OUTPUT_NAME boost_${LIB_NAME}-${KLAYGE_COMPILER_NAME}${KLAYGE_COMPILER_VERSION}-mt-${BOOST_VER}
	RELWITHDEBINFO_OUTPUT_NAME boost_${LIB_NAME}-${KLAYGE_COMPILER_NAME}${KLAYGE_COMPILER_VERSION}-mt-${BOOST_VER}
	MINSIZEREL_OUTPUT_NAME boost_${LIB_NAME}-${KLAYGE_COMPILER_NAME}${KLAYGE_COMPILER_VERSION}-mt-${BOOST_VER}
)
IF(KLAYGE_BUILD_PLATFORM_WINDOWS_RUNTIME)
	SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES VS_WINRT_EXTENSIONS TRUE)
ENDIF()

TARGET_LINK_LIBRARIES(${LIB_NAME})
