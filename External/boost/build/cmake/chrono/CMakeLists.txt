SET(LIB_NAME chrono)

SET(SOURCE_FILES
	${BOOST_PROJECT_DIR}/libs/chrono/src/chrono.cpp
	${BOOST_PROJECT_DIR}/libs/chrono/src/thread_clock.cpp
	${BOOST_PROJECT_DIR}/libs/chrono/src/process_cpu_clocks.cpp
)

IF(UNIX)
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -lrt -lpthread")
ENDIF()
IF(CMAKE_COMPILER_IS_GNUCXX OR (CMAKE_C_COMPILER_ID STREQUAL "Clang") OR APPLE)
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wextra -pedantic -Wno-long-long -Wno-variadic-macros")
ENDIF()
IF(MINGW)
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fdiagnostics-show-option")
ENDIF()
IF(MSVC)
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4512")
ENDIF()

IF(KLAYGE_PREFERRED_LIB_TYPE STREQUAL "SHARED")
	ADD_DEFINITIONS(-DBOOST_CHRONO_OPTIONS_DYN_LINK=1)
ELSE()
	ADD_DEFINITIONS(-DBOOST_CHRONO_OPTIONS_STATIC_LINK=1)
ENDIF()
ADD_DEFINITIONS(-DBOOST_SYSTEM_NO_DEPRECATED)

SETUP_BOOST_LIBRARY(${LIB_NAME})

ADD_DEPENDENCIES(${LIB_NAME} system)
