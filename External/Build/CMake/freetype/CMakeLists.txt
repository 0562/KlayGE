SET(FREETYPE_MAJOR_VERSION 2)
SET(FREETYPE_MINOR_VERSION 8)
SET(FREETYPE_PATCH_VERSION 1)
SET(FREETYPE_VERSION ${FREETYPE_MAJOR_VERSION}.${FREETYPE_MINOR_VERSION}.${FREETYPE_PATCH_VERSION})

SET(FREETYPE_PROJECT_DIR "${CMAKE_CURRENT_SOURCE_DIR}/../../../freetype")
SET(FREETYPE_OUTPUT_DIR "${EXTERNAL_PROJECT_DIR}/lib/freetype/${KLAYGE_PLATFORM_NAME}")
SET(REL_PATH "External/Downloads/freetype-${FREETYPE_VERSION}.patched.7z")
SET(PACKAGE_FILE_ID "0f66efa1ef9d1b23a23716799e559afa9cf72b2d")

DOWNLOAD_PACKAGE("freetype" ${REL_PATH} ${PACKAGE_FILE_ID})

SET(BUILD_SHARED_LIBS OFF CACHE BOOL "" FORCE)
SET(WITH_ZLIB OFF CACHE BOOL "" FORCE)
SET(WITH_BZip2 OFF CACHE BOOL "" FORCE)
SET(WITH_PNG OFF CACHE BOOL "" FORCE)
SET(WITH_HarfBuzz OFF CACHE BOOL "" FORCE)

ADD_SUBDIRECTORY(${FREETYPE_PROJECT_DIR} "${CMAKE_CURRENT_BINARY_DIR}/freetype")

SET_TARGET_PROPERTIES(freetype PROPERTIES
	ARCHIVE_OUTPUT_DIRECTORY ${FREETYPE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${FREETYPE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${FREETYPE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO ${FREETYPE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL ${FREETYPE_OUTPUT_DIR}
	PROJECT_LABEL freetype
	DEBUG_POSTFIX ${CMAKE_DEBUG_POSTFIX}
	OUTPUT_NAME freetype${KLAYGE_OUTPUT_SUFFIX}
)

foreach(target
	"freetype" "dist")
	set_target_properties(${target} PROPERTIES FOLDER "${EXTERNAL_VS_FOLDER_PREFIX}/freetype")
endforeach()
